#!/usr/bin/env python3
""" Read in a report generated by running `trace-cmd record -e kvm`
and print latencies spent in the host, i.e. between `kvm_entry` and `kvm_exit`
"""

import sys
from collections import defaultdict

count = 0

if len(sys.argv) != 2:
    print('usage: ./print_host_latencies.py /path/to/the/ftrace/report')
    exit(1)

with open(sys.argv[1]) as infile:
    for line in infile:
        strs = line.strip().split()
        if len(strs) > 3 and strs[3] == 'kvm_mmu_get_page:':
            count += 1
print(count)
